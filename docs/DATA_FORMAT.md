# シナリオデータ形式仕様書: NovelGen-Script v1.0

このドキュメントは、本アプリケーションで利用するシナリオのデータ形式「NovelGen-Script」の仕様を定義します。この形式は、ライターが特別なツールなしに、プレーンテキストで直感的にゲームシナリオを記述できることを目的としています。

## 1. 基本構造

- シナリオは、1つ以上の「シーン」で構成されます。
- 各シーンは `---`（ハイフン3つ）で区切られます。

## 2. シーンの構成要素

各シーンには、以下の要素を自由な順序で記述できます。

### 2.1. テキスト

- 通常のテキストは、そのまま物語の文章として表示されます。

### 2.2. コメント

- `#`で始まる行はコメントとして扱われ、ゲーム中には表示されません。ライター向けのメモとして利用できます。

### 2.3. 画像

- Markdownの画像記法と同様です。
- `![代替テキスト](画像のURL)`
- 例: `![古い城の外観](https://example.com/images/castle.jpg)`

### 2.4. 文字装飾

- **太字**: `**強調したいテキスト**`
- *斜体*: `*少し傾けたいテキスト*`

### 2.5. ゲーム要素（コマンド形式）

ゲームのロジックは `[コマンド: 値]` という形式で記述します。

#### a. アイテムの管理

- **取得**: プレイヤーがアイテムを手に入れます。
  - `[item: get(魔法の鍵)]`
- **喪失**: プレイヤーがアイテムを失います。
  - `[item: lose(たいまつ)]`

#### b. フラグ（イベント管理）

- 特定のイベントが発生したことを記録します。
- **設定**: `[flag: set(王に会った)]`

#### c. 選択肢（アクション）

- プレイヤーが実行するアクションを定義します。分岐がないため、どのアクションを選択しても次のシーンに進みます。
- `[action: 次へ進む]`
- `[action: ドアを開ける]`

## 3. シナリオ記述例

以下は、NovelGen-Scriptで記述されたシナリオのサンプルです。

```plaintext
# ゲーム開始
あなたは古い城の前に立っている。
目の前には、重厚な木の扉がある。

![城の扉](https://example.com/images/door.jpg)

[action: 扉を調べる]

---

# 扉のシーン
扉には鍵がかかっているようだ。よく見ると、足元に **光る何か** が落ちている。

[item: get(古びた鍵)]

[action: 鍵を使って扉を開ける]

---

# 城の内部
城の中はひんやりとしていて、薄暗い。
*どこからか物音が聞こえる...*

[flag: set(城に侵入した)]

[action: 奥へ進む]
```

## 4. 今後の拡張予定

- 条件分岐: `[if: has_item(古びた鍵)] テキスト [endif]`
- サウンド再生: `[sound: play(door_open.mp3)]`
- 変数操作: `[var: gold += 10]`
